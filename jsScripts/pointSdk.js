/* eslint-disable */
(()=>{function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},s={},a=t.parcelRequireaa52;null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in s){var t=s[e];delete s[e];var a={id:e,exports:{}};return r[e]=a,t.call(a.exports,a,a.exports),a.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){s[e]=t},t.parcelRequireaa52=a),a.register("39CnJ",(function(e,t){var r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=function(e){"use strict";if("undefined"==typeof browser||Object.getPrototypeOf(browser)!==Object.prototype){const t="The message port closed before a response was received.",r="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",s=e=>{const s={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(s).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class a extends WeakMap{get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}constructor(e,t){super(t),this.createItem=e}}const n=(t,r)=>(...s)=>{e.runtime.lastError?t.reject(e.runtime.lastError):r.singleCallbackArg||s.length<=1&&!1!==r.singleCallbackArg?t.resolve(s[0]):t.resolve(s)},o=e=>1==e?"argument":"arguments",i=(e,t,r)=>new Proxy(t,{apply:(t,s,a)=>r.call(s,e,...a)});let g=Function.call.bind(Object.prototype.hasOwnProperty);const m=(e,t={},r={})=>{let s=Object.create(null),a={has:(t,r)=>r in e||r in s,get(a,c,l){if(c in s)return s[c];if(!(c in e))return;let d=e[c];if("function"==typeof d)if("function"==typeof t[c])d=i(e,e[c],t[c]);else if(g(r,c)){let t=((e,t)=>function(r,...s){if(s.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${o(t.minArgs)} for ${e}(), got ${s.length}`);if(s.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${o(t.maxArgs)} for ${e}(), got ${s.length}`);return new Promise(((a,o)=>{if(t.fallbackToNoCallback)try{r[e](...s,n({resolve:a,reject:o},t))}catch(n){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,n),r[e](...s),t.fallbackToNoCallback=!1,t.noCallback=!0,a()}else t.noCallback?(r[e](...s),a()):r[e](...s,n({resolve:a,reject:o},t))}))})(c,r[c]);d=i(e,e[c],t)}else d=d.bind(e);else if("object"==typeof d&&null!==d&&(g(t,c)||g(r,c)))d=m(d,t[c],r[c]);else{if(!g(r,"*"))return Object.defineProperty(s,c,{configurable:!0,enumerable:!0,get:()=>e[c],set(t){e[c]=t}}),d;d=m(d,t[c],r["*"])}return s[c]=d,d},set:(t,r,a,n)=>(r in s?s[r]=a:e[r]=a,!0),defineProperty:(e,t,r)=>Reflect.defineProperty(s,t,r),deleteProperty:(e,t)=>Reflect.deleteProperty(s,t)},c=Object.create(e);return new Proxy(c,a)},c=e=>({addListener(t,r,...s){t.addListener(e.get(r),...s)},hasListener:(t,r)=>t.hasListener(e.get(r)),removeListener(t,r){t.removeListener(e.get(r))}});let l=!1;const d=new a((e=>"function"!=typeof e?e:function(t,s,a){let n,o,i=!1,g=new Promise((e=>{n=function(t){l||(console.warn(r,(new Error).stack),l=!0),i=!0,e(t)}}));try{o=e(t,s,n)}catch(e){o=Promise.reject(e)}const m=!0!==o&&(c=o)&&"object"==typeof c&&"function"==typeof c.then;var c;if(!0!==o&&!m&&!i)return!1;const d=e=>{e.then((e=>{a(e)}),(e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",a({__mozWebExtensionPolyfillReject__:!0,message:t})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)}))};return d(m?o:g),!0})),A=({reject:r,resolve:s},a)=>{e.runtime.lastError?e.runtime.lastError.message===t?s():r(e.runtime.lastError):a&&a.__mozWebExtensionPolyfillReject__?r(new Error(a.message)):s(a)},p=(e,t,r,...s)=>{if(s.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${o(t.minArgs)} for ${e}(), got ${s.length}`);if(s.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${o(t.maxArgs)} for ${e}(), got ${s.length}`);return new Promise(((e,t)=>{const a=A.bind(null,{resolve:e,reject:t});s.push(a),r.sendMessage(...s)}))},u={runtime:{onMessage:c(d),onMessageExternal:c(d),sendMessage:p.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:p.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},w={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return s.privacy={network:{"*":w},services:{"*":w},websites:{"*":w}},m(e,u,s)};if("object"!=typeof chrome||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");e.exports=s(chrome)}else e.exports=browser},"function"==typeof define&&define.amd?define("webextension-polyfill",["module"],r):r(e)}));var n=a("39CnJ");window.top.IS_GATEWAY=!0;var o=(e,t)=>{class r extends Error{}class s extends Error{}class a extends Error{}class n extends Error{}class o extends Error{}class i extends Error{}const g=async()=>window.top.IS_GATEWAY?window.top.POINT_JWT:new Promise(((e,t)=>{const r=Math.random(),s=a=>{a.data.__page_req_id===r&&"to_page"===a.data.__direction&&(window.removeEventListener("message",s),a.data.code?t({code:a.data.code,message:a.data.message}):e(a.data.token))};window.addEventListener("message",s),window.postMessage({__page_req_id:r,__message_type:"getAuthToken",__direction:"to_bg"})})),m=async(t,s,a)=>{try{const n=await g(),o=await window.top.fetch(`${e}${a?"/point_api/":"/v1/api/"}${t}`,{cache:"no-cache",credentials:"include",keepalive:!0,...s,headers:{"Content-Type":"application/json","X-Point-Token":`Bearer ${n}`,...s?.headers}});if(!o.ok){const{ok:e,status:t,statusText:s,headers:a}=o;throw console.error("SDK call failed:",{ok:e,status:t,statusText:s,headers:Object.fromEntries([...a.entries()])}),new r("Point SDK request failed")}try{return await o.json()}catch(e){throw console.error("Point API response parsing error:",e),e}}catch(e){throw console.error("Point API call failed:",e),e}},c=async(t,s)=>{try{const a=await g(),n=await window.top.fetch(`${e}/${t}`,{cache:"no-cache",credentials:"include",keepalive:!0,...s,headers:{"X-Point-Token":`Bearer ${a}`,...s?.headers??{}}});if(!n.ok){const{ok:e,status:t,statusText:s,headers:a}=n;throw console.error("SDK ZProxy call failed:",{ok:e,status:t,statusText:s,headers:Object.fromEntries([...a.entries()])}),new r("Point SDK request failed")}try{return await n.json()}catch(e){throw console.error("Point API response parsing error:",e),e}}catch(e){throw console.error("Point API call failed:",e),e}},l={get:(e,t,r,s)=>m(`${e}${t?"?":""}${new URLSearchParams(t).toString()}`,{method:"GET",headers:r},s),post:(e,t,r,s)=>m(e,{method:"POST",headers:r,body:JSON.stringify({...t,_csrf:window.localStorage.getItem("csrf_token")})},s),postFile:(e,t)=>c(e,{method:"POST",body:t}),encryptAndPostFile:(e,t,r,s)=>c(e,{method:"POST",body:t,headers:{identities:r.join(","),metadata:s?.join(",")??""}})};function d(e){return new Promise((t=>setTimeout(t,e)))}const A={},p={},u={},w="subscription_confirmation",h="subscription_cancellation",x="subscription_event",f="subscription_error",b="subscribeContractEvent",y="removeSubscriptionById",_=({type:e,params:{contract:t,event:r}={}})=>`${e}_${t}_${r}`,v=e=>p[e]||(p[e]=[]),k={},P=(e,{messageQueueSizeLimit:t=1e3}={})=>new Promise(((r,m)=>{if(void 0!==A[e])return void r(A[e]);const c=new WebSocket(e);c.onopen=()=>r(Object.assign(A[e]=c,{async subscribeToContractEvent(e){const t={type:b,params:e,__point_token:await g()},r=_(t);k[r]=function(){let e=()=>{},t=()=>{};return Object.assign(new Promise(((r,s)=>{e=r,t=s})),{resolve:e,reject:t})}(),await c.send(JSON.stringify(t));const s=await Promise.race([k[r],(a=1e4,new Promise(((e,t)=>setTimeout((()=>t(new o("Subscription confirmation timeout"))),a))))]);var a;const n=v(s);return Object.assign((async()=>{for(;;)try{const e=u[s];if(e)throw e;if(n.length)return n.shift();await d(100)}catch(e){throw console.error("subscribed message error:",e),e}}),{unsubscribe:async()=>c.send(JSON.stringify({type:y,params:{subscriptionId:s},__point_token:await g()}))})}})),c.onerror=e=>{for(const t in p)u[t]||(u[t]=new a(e.toString()))},c.onclose=t=>{if(delete A[e],1e3===t.code||1001===t.code)r(void 0);else{for(const e in p)u[e]||(u[e]=new n(t.toString()));m()}},c.onmessage=e=>{try{const{type:r,request:a,subscriptionId:n,data:o}=JSON.parse(e.data);switch(r){case w:{const e=_(a),{resolve:t,reject:r}=k[e]||{};"string"!=typeof n?"function"==typeof r&&r(new i(`Invalid subscription id "${n}" for request id: "${e}"`)):"function"==typeof t&&t(n);break}case h:n&&(console.info({type:r,request:a,subscriptionId:n,data:o}),delete p[n],delete u[n]);break;case x:if(n){const e=v(n);e.length>t?u[n]=new s("ZProxy WS message queue overflow"):e.push(o)}else console.error("Unable to identify subscription channel",{subscriptionId:n,request:a,data:o});break;case f:n?u[n]=new i(JSON.stringify(o)):console.error("Unable to identify subscription channel",{subscriptionId:n,request:a,data:o});break;default:console.error("Unsupported event type:",{type:r,request:a,subscriptionId:n,data:o})}}catch(e){console.error("Web Socket onmessage error:",e)}}})),T=e=>new Promise(((t,r)=>{const s=Math.random(),a=e=>{e.data.__page_req_id===s&&"to_page"===e.data.__direction&&(window.removeEventListener("message",a),e.data.code?r({code:e.data.code,message:e.data.message}):t(e.data.result))};window.addEventListener("message",a),window.postMessage({messageId:e,__message_type:"registerHandler",__page_req_id:s,__direction:"to_bg"})}));return{version:t,status:{ping:()=>l.get("status/ping")},contract:{load:({contract:e,...t})=>l.get(`contract/load/${e}`,t),call:async({contract:e,method:t,params:r})=>{if(window.top.IS_GATEWAY){return(await l.post("contract/safe_call",{contract:e,method:t,params:r})).data}const{data:{abi:s,address:a}}=await l.get(`contract/load/${e}`,{}),n=s.find((e=>e.name===t));if(!n)throw new Error(`Method ${t} not found in contract ${e}`);const o=r??[];if(o.length!==n.inputs.length)throw new Error(`Invalid number of params, expected ${n.inputs.length}, got ${o.length}`);for(let e=0;e<o.length;e++)"bytes32"!==n.inputs[e].internalType||"string"!=typeof o[e]||o[e].startsWith("0x")||(o[e]=`0x${o[e]}`);const{data:i}=await l.post("contract/encodeFunctionCall",{jsonInterface:n,params:o}),g=await window.top.ethereum.request({method:"eth_requestAccounts"});switch(n.stateMutability){case"view":case"pure":const t=await window.top.ethereum.request({method:"eth_call",params:[{from:g[0],to:a,data:i},"latest"]});return{data:(await l.post("contract/decodeParameters",{typesArray:n.outputs,hexString:t})).data[0]};case"nonpayable":return window.top.ethereum.request({meta:{contract:e},method:"eth_sendTransaction",params:[{from:g[0],to:a,data:i}]});case"payable":throw new Error("Do not use call for payable functions, use send instead");default:throw new Error(`Unexpected function state mutability ${n.stateMutability}`)}},send:async({contract:e,method:t,params:r,value:s})=>{const{data:{abi:a,address:n}}=await l.get(`contract/load/${e}`,{}),o=await window.top.ethereum.request({method:"eth_requestAccounts"}),i=a.find((e=>e.name===t));if(!i)throw new Error(`Method ${t} not found in contract ${e}`);const g=r??[];if(g.length!==i.inputs.length)throw new Error(`Invalid number of params, expected ${i.inputs.length}, got ${g.length}`);for(let e=0;e<g.length;e++)"bytes32"!==i.inputs[e].internalType||"string"!=typeof g[e]||g[e].startsWith("0x")||(g[e]=`0x${g[e]}`);if(["view","pure"].includes(i.stateMutability))throw new Error(`Method ${t} is a view one, use call instead of send`);const{data:m}=await l.post("contract/encodeFunctionCall",{jsonInterface:i,params:r??[]});return window.top.ethereum.request({meta:{contract:e},method:"eth_sendTransaction",params:[{from:o[0],to:n,data:m,value:s}]})},events:e=>l.post("contract/events",e),async subscribe({contract:t,event:s,...a}){if("string"!=typeof t)throw new r(`Invalid contract ${t}`);if("string"!=typeof s)throw new r(`Invalid event ${s}`);const n=new URL(e);n.protocol="https:"===n.protocol?"wss:":"ws:",n.pathname+=n.pathname.endsWith("/")?"ws":"/ws";const o=await P(n.toString());if(!o)throw new r("Failed to establish web socket connection");return o.subscribeToContractEvent({contract:t,event:s,...a})}},storage:{postFile:e=>l.postFile("_storage/",e),encryptAndPostFile:(e,t,r)=>l.encryptAndPostFile("_encryptedStorage/",e,t,r),getString:({id:e,...t})=>l.get(`storage/getString/${e}`,t),getFile:async({id:t})=>{const r=await g();return(await window.top.fetch(`${e}/_storage/${t}`,{headers:{"X-Point-Token":`Bearer ${r}`}})).blob()},getEncryptedFile:async({id:t,eSymmetricObj:r,symmetricObj:s})=>{if(!!r==!!s)throw new Error("Either eSymmetricObj or symmetricObj should be specified, and only one of them");const a=await g();return(await window.top.fetch(`${e}/_encryptedStorage/${t}${r?`?eSymmetricObj=${r}`:""}${s?`?symmetricObj=${s}`:""}`,{headers:{"X-Point-Token":`Bearer ${a}`}})).blob()},putString:e=>l.post("storage/putString",e)},wallet:{address:()=>l.get("wallet/address"),..."https://confirmation-window"===e?{hash:()=>l.get("wallet/hash",{},{},!0)}:{},publicKey:()=>l.get("wallet/publicKey",{}),balance:e=>{if(!e)throw new Error("No network specified");return l.get("wallet/balance",{network:e})},send:async({to:e,network:t,value:r})=>{const{networks:s,default_network:a}=await l.get("blockchain/networks"),n=t??a;if(!s[n])throw new Error(`Unknown network ${n}`);switch(s[n].type){case"eth":const t=await window.top.ethereum.request({method:"eth_requestAccounts"});return window.top.ethereum.request({method:"eth_sendTransaction",params:[{from:t[0],to:e,value:r}],chain:n});case"solana":return window.top.solana.request({method:"solana_sendTransaction",params:[{to:e,lamports:r}],chain:n});default:throw new Error(`Unexpected network type ${s[n].type}`)}},encryptData:({publicKey:e,data:t,...r})=>l.post("wallet/encryptData",{publicKey:e,data:t,...r}),decryptData:({data:e,...t})=>l.post("wallet/decryptData",{data:e,...t})},identity:{publicKeyByIdentity:({identity:e,...t})=>l.get(`identity/publicKeyByIdentity/${e}`,t),identityToOwner:({identity:e,...t})=>l.get(`identity/identityToOwner/${e}`,t),ownerToIdentity:({owner:e,...t})=>l.get(`identity/ownerToIdentity/${e}`,t),me:()=>l.get("identity/isIdentityRegistered/")},..."https://point"===e?{point:{wallet_send:async({to:e,network:t,value:r})=>{const s=String(Math.random());await Promise.all([T(s),(async()=>{if(200!==(await l.post("wallet/send",{to:e,network:t,value:r,messageId:s},{},!0)).status)throw new Error("Failed to send token")})()])},wallet_send_token:async({to:e,network:t,tokenAddress:r,value:s})=>{const a=String(Math.random());await Promise.all([T(a),(async()=>{if(200!==(await l.post("wallet/sendToken",{to:e,network:t,value:s,tokenAddress:r,messageId:a},{},!0)).status)throw new Error("Failed to send token")})()])},set_auth_token:e=>new Promise(((t,r)=>{const s=Math.random(),a=e=>{e.data.__page_req_id===s&&"to_page"===e.data.__direction&&(window.removeEventListener("message",a),e.data.code?r({code:e.data.code,message:e.data.message}):t(e.data))};window.addEventListener("message",a),window.postMessage({token:e,__page_req_id:s,__message_type:"setAuthToken",__direction:"to_bg"})})),get_auth_token:g}}:{}}};var i=()=>{function e(e){return new Promise(((t,r)=>{const s=Math.random(),a=e=>{e.data.__page_req_id===s&&"to_page"===e.data.__direction&&(window.removeEventListener("message",a),e.data.code?r({code:e.data.code,message:e.data.message}):e.data.error?r({code:e.data.error.code,message:e.data.error.message}):t(e.data.result))};window.addEventListener("message",a),window.postMessage({...e,__provider:"eth",__message_type:"rpc",__page_req_id:s,__direction:"to_bg"})}))}return{request:e,send:t=>e({method:t})}};var g=()=>{const e=e=>new Promise(((t,r)=>{const s=Math.random(),a=e=>{e.data.__page_req_id===s&&"to_page"===e.data.__direction&&(window.removeEventListener("message",a),e.data.code?r({code:e.data.code,message:e.data.message}):e.data.error?r({code:e.data.error.code,message:e.data.error.message}):t(e.data.result))};window.addEventListener("message",a),window.postMessage({...e,__message_type:"rpc",__provider:"solana",__page_req_id:s,__direction:"to_bg"})}));return{connect:async()=>({publicKey:(await e({method:"solana_requestAccount"})).publicKey}),disconnect:async()=>{},request:e,signAndSendTransaction:t=>e({method:"solana_sendTransaction",params:[t.toJSON()]})}};var m={ynet:{name:"Ynet",type:"eth",currency:"yPoint"},rinkeby:{name:"Rinkeby",type:"eth",currency:"rinkebyEth"},solana_devnet:{name:"Solana Devnet",type:"solana",currency:"DevSol"}};const c=e(n).runtime.getManifest().version;window.point=o(window.location.origin,c),window.point.networks=m,window.ethereum=i(),window.solana=g()})();